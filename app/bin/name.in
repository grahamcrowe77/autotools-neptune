#!/usr/bin/env escript
%% -*- erlang -*-
%%! -pa ebin

-define(COMMAND_NAME, "%LC_PACKAGE_NAME%").

main(["--version"]) ->
    ok = application:start(%LC_PACKAGE_NAME%),
    {ok, Version} = %LC_PACKAGE_NAME%_server:version(),
    ok = io:format("~s ~s~n", [?COMMAND_NAME, Version]);
main(["--square", Value]) ->
    ok = application:start(%LC_PACKAGE_NAME%),
    case string:to_integer(Value) of
	{error, _} ->
	    ok = io:format("~s is not an integer!~n", [Value]);
	{Integer, _Rest} ->
	    {ok, Message} = %LC_PACKAGE_NAME%_server:message({square, Integer}),
	    ok = io:format("~s", [Message])
    end;
main(_) ->
    usage(),
    halt(1).

usage() ->
    io:format("~s [--square Integer]~n", [?COMMAND_NAME]),
    io:format("see manual page for ~s(1) for more details~n", [?COMMAND_NAME]).
